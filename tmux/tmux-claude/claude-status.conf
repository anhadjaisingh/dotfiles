# tmux-claude-status configuration
# Shows per-window indicator when Claude Code is waiting for input

# Style option: "white" or "magenta" for the waiting indicator
set-option -g @claude-status-style "white"

# Define colors based on style
# Waiting: black bg + bright fg + filled dot
# Busy: default + grey hollow dot

# Window status format (non-current windows)
set-option -g window-status-format '\
#{?#{==:#{@claude-status},waiting},\
#[bg=black]#{?#{==:#{@claude-status-style},magenta},#[fg=magenta],#[fg=brightwhite]}#I:#W ●#[default],\
#{?#{==:#{@claude-status},busy},\
#[fg=colour244]#I:#W ○#[default],\
#I:#W}}'

# Current window format (highlighted)
set-option -g window-status-current-format '\
#{?#{==:#{@claude-status},waiting},\
#[bg=black]#{?#{==:#{@claude-status-style},magenta},#[fg=magenta],#[fg=brightwhite]}#[bold]#I:#W ●#[default],\
#{?#{==:#{@claude-status},busy},\
#[fg=colour244]#[bold]#I:#W ○#[default],\
#[bold]#I:#W}}'

# Start the polling script when tmux server starts
# The script handles its own duplicate prevention
run-shell -b '~/.tmux/tmux-claude/claude-status.sh &'

# Command aliases (prefix + : then type command name)
set -s command-alias[100] claude-restart='run-shell "pkill -f claude-status.sh; ~/.tmux/tmux-claude/claude-status.sh &"'
set -s command-alias[101] claude-style-white='set -g @claude-status-style "white"'
set -s command-alias[102] claude-style-magenta='set -g @claude-status-style "magenta"'
